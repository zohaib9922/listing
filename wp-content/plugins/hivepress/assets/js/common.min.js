var hivepress={getSelector:function(a){return"[data-component=\""+a+"\"]"},getComponent:function(a){return jQuery(this.getSelector(a))}};(function(a){"use strict";a(document).ready(function(){var b=Math.floor;hivepress.getComponent("link").on("click",function(b){var c=a(this).data("url");0!==c.indexOf("#")&&(window.location.href=c),b.preventDefault()}),hivepress.getComponent("modal").each(function(){var b="#"+a(this).attr("id");a("a[href=\""+b+"\"], button[data-url=\""+b+"\"]").on("click",function(c){a.fancybox.close(),a.fancybox.open({src:b,touch:!1}),c.preventDefault()})}),hivepress.getComponent("select").each(function(){var b=a(this),c={width:"100%",dropdownAutoWidth:!1,minimumResultsForSearch:20,templateResult:function(b){var c=b.text,d=0;return b.element&&(d=parseInt(a(b.element).data("level")),c=a("<div />").css("padding-left",20*d+"px").text(c)),c}};if(b.data("placeholder")&&(c.placeholder=b.data("placeholder")),"inline"===b.data("style")&&a.extend(c,{containerCssClass:"select2-selection--inline",dropdownCssClass:"select2-dropdown--inline",width:"resolve",dropdownAutoWidth:!0,minimumResultsForSearch:-1}),"icon"===b.data("template")){var d=function(a){var b=a.text;return a.id&&(b="<i class=\"fas fa-fw fa-"+a.id+"\"></i> "+a.text),b};a.extend(c,{templateResult:d,templateSelection:d,escapeMarkup:function(a){return a}})}if(b.data("source"))if(a.extend(c,{ajax:{url:b.data("source"),dataType:"json",delay:250,cache:!0,data:function(a){return{search:a.term,context:"list",parent_value:b.data("parent-value"),_wpnonce:hivepressCoreData.apiNonce}},processResults:function(a){var b=[];return a&&a.hasOwnProperty("data")&&(b=a.data),{results:b}}}}),b.data("parent")){var e=b.closest("form").find(":input[name=\""+b.data("parent")+"\"]");e.length&&e.on("change",function(){b.data("parent-value",a(this).val())})}else c.minimumInputLength=3;b.data("input")&&a.extend(c,{tags:!0,tokenSeparators:[","]}),b.select2(c)});var c=new DateFormatter;if(flatpickr.l10ns.hasOwnProperty(hivepressCoreData.language)){var d=flatpickr.l10ns[hivepressCoreData.language];flatpickr.localize(d),c=new DateFormatter({dateSettings:{days:d.weekdays.longhand,daysShort:d.weekdays.shorthand,months:d.months.longhand,monthsShort:d.months.shorthand,meridiem:d.hasOwnProperty("amPM")?d.amPM:["AM","PM"]}})}hivepress.getComponent("date").each(function(){var d=a(this),e={allowInput:!0,altInput:!0,dateFormat:"Y-m-d",altFormat:"Y-m-d",defaultHour:0,disable:[],disableMobile:!0,onOpen:function(b,c,d){a(d.altInput).prop("readonly",!0),a(d.element).find("[data-clear]").show()},onClose:function(b,c,d){a(d.altInput).prop("readonly",!1),a(d.altInput).blur(),a(d.element).find("[data-clear]").hide(),a(d.element).data("reset")&&(d.clear(),a(d.element).data("reset",!1))}};if(d.is("div")&&(e.wrap=!0,e.altInputClass="",d.find("[data-clear]").on("click",function(){d.data("reset",!0)})),d.data("format")&&(e.dateFormat=d.data("format")),d.data("display-format")&&(e.altFormat=d.data("display-format")),d.data("min-date")&&(e.minDate=d.data("min-date")),d.data("max-date")&&(e.maxDate=d.data("max-date")),d.data("disabled-dates")&&(e.disable=d.data("disabled-dates")),d.data("disabled-days")){var f=d.data("disabled-days");if(f.length){e.disable.push(function(a){return-1!==f.indexOf(a.getDay())})}}if(d.data("ranges")){var g=d.data("ranges");e.onDayCreate=function(c,d,e,f){if(!f.className.includes("disabled")){var h=b(f.dateObj.getTime()/1e3)-60*f.dateObj.getTimezoneOffset();a.each(g,function(a,b){if(b.start<=h&&h<b.end)return f.innerHTML+="<span class=\"flatpickr-day-label\">"+b.label+"</span>",f.className+=" flatpickr-status",b.hasOwnProperty("status")&&(f.className+=" flatpickr-status--"+b.status),!1})}}}if(d.is("[data-offset]")&&(e.minDate=new Date().fp_incr(d.data("offset"))),d.is("[data-window]")&&(e.maxDate=new Date().fp_incr(d.data("window"))),d.data("time")&&(e.enableTime=!0),d.data("mode")&&(e.mode=d.data("mode"),"range"===d.data("mode"))){var h=d.parent().find("input[type=\"hidden\"]").not(d),i=d.data("min-length"),j=d.data("max-length");a.extend(e,{defaultDate:[h.eq(0).val(),h.eq(1).val()],errorHandler:function(){},onChange:function(a,d,f){if(2===a.length){if(i||j){var g=b((a[1].getTime()-a[0].getTime())/86400000),k=0;g<i?k=i-g:g>j&&(k=j-g),k&&(a[1].setDate(a[1].getDate()+k),f.setDate(a),f.open())}var l=a.map(function(a){return c.formatDate(a,e.dateFormat)});h.eq(0).val(l[0]),h.eq(1).val(l[1])}else h.eq(0).val(""),h.eq(1).val("")}})}a.extend(e,{time_24hr:-1===e.altFormat.indexOf("a")&&-1===e.altFormat.indexOf("A"),parseDate:function(a){var b=c.parseDate(a,e.dateFormat);return"U"===e.dateFormat&&(b=new Date(b.toLocaleString("en-US",{timeZone:"UTC"}))),b},formatDate:function(a,b){var d=c.formatDate(a,b);return"U"===b&&(d=parseInt(d)-60*a.getTimezoneOffset()),d}}),d.flatpickr(e)}),hivepress.getComponent("time").each(function(){var d=a(this),e={allowInput:!0,altInput:!0,noCalendar:!0,enableTime:!0,dateFormat:"U",altFormat:"g:i A",defaultHour:0,disableMobile:!0,parseDate:function(a){var c=new Date;return c.setHours(b(a/3600)),c.setMinutes(b(a%3600/60)),c.setSeconds(a%60),c},formatDate:function(a,b){return"U"===b?3600*a.getHours()+60*a.getMinutes()+a.getSeconds():c.formatDate(a,b)},onOpen:function(b,c,d){a(d.altInput).prop("readonly",!0),a(d.element).find("[data-clear]").show()},onClose:function(b,c,d){a(d.altInput).prop("readonly",!1),a(d.altInput).blur(),a(d.element).find("[data-clear]").hide(),a(d.element).data("reset")&&(d.clear(),a(d.element).data("reset",!1))}};d.is("div")&&(e.wrap=!0,e.altInputClass="",d.find("[data-clear]").on("click",function(){d.data("reset",!0)})),d.data("display-format")&&(e.altFormat=d.data("display-format")),-1===e.altFormat.indexOf("a")&&-1===e.altFormat.indexOf("A")&&(e.time_24hr=!0),d.flatpickr(e)}),hivepress.getComponent("file-upload").each(function(){var b=a(this),c=b.parents("[data-model]:first"),d=b.closest("form").find(":submit"),e=b.closest("label"),f=e.find("button").first(),g=e.parent().find(hivepress.getSelector("messages")).first(),h=e.parent().children("div").first();b.fileupload({url:b.data("url"),dataType:"json",paramName:"file",formData:{parent_model:c.data("model"),parent_field:b.data("name"),parent:c.data("id"),render:!0,_wpnonce:hivepressCoreData.apiNonce},start:function(){b.prop("disabled",!0),f.prop("disabled",!0),f.attr("data-state","loading"),d.length&&(d.prop("disabled",!0),d.attr("data-state","loading")),g.hide().html("")},stop:function(){b.prop("disabled",!1),f.prop("disabled",!1),f.attr("data-state",""),d.length&&(d.prop("disabled",!1),d.attr("data-state",""))},always:function(c,d){var e=d.jqXHR.responseJSON;e.hasOwnProperty("data")?b.prop("multiple")?h.append(e.data.html):h.html(e.data.html):e.hasOwnProperty("error")&&(e.error.hasOwnProperty("errors")?a.each(e.error.errors,function(a,b){g.append("<div>"+b.message+"</div>")}):e.error.hasOwnProperty("message")&&g.html("<div>"+e.error.message+"</div>"),!g.is(":empty")&&g.show())}})}),a(document).on("click",hivepress.getSelector("file-delete"),function(b){var c=a(this).parent();a.ajax({url:a(this).data("url"),method:"DELETE",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}}),c.remove(),b.preventDefault()}),hivepress.getComponent("sortable").each(function(){var b=a(this);b.sortable({stop:function(){1<b.children().length&&b.children().each(function(b){a.ajax({url:a(this).data("url"),method:"POST",data:{sort_order:b},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)}})})}})}),hivepress.getComponent("repeater").each(function(){var b=a(this),c=b.find("tbody"),d=b.find("tr:first");c.sortable({handle:"[data-sort]"}),d.length&&b.find("[data-add]").on("click",function(){b.find("select").select2("destroy");var e=d.clone(),f=Math.random().toString(36).slice(2);f&&(e.find(":input").each(function(){var b=a(this),c=b.attr("name"),d=c.match(/\[([^\]]+)\]/);if(d&&b.attr("name",c.replace(d[1],f)),"checkbox"===b.attr("type")){var e="a"+Math.random().toString(36).slice(2);b.attr("id",e),b.closest("label").attr("for",e)}else b.val("")}),e.appendTo(c)),b.find("select").select2({width:"100%",minimumResultsForSearch:-1})}),b.on("click","[data-remove]",function(){1<b.find("tr").length&&a(this).closest("tr").remove()})}),hivepress.getComponent("chart").each(function(){var b=a(this),c=new Chart(b,{type:"line",options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}],xAxes:[{type:"time",time:{tooltipFormat:"MMM D, YYYY",unit:"week",displayFormats:{week:"MMM D, YYYY"}}}]}},data:{labels:b.data("labels"),datasets:b.data("datasets")}})}),hivepress.getComponent("form").each(function(){var b=a(this),c=b.find(".g-recaptcha"),d=a(".g-recaptcha").index(c.get(0)),e=b.find(":submit");if(!0===b.data("autosubmit")&&b.on("change",function(){b.submit()}),b.on("submit",function(){e.prop("disabled",!0),e.attr("data-state","loading")}),b.data("action")){var f=b.find(hivepress.getSelector("messages")).first(),g=f.attr("class").split(" ")[0];b.on("submit",function(h){f.hide().html("").removeClass(g+"--success "+g+"--error"),"undefined"!=typeof tinyMCE&&tinyMCE.triggerSave(),a.ajax({url:b.data("action"),method:"POST",data:new FormData(b.get(0)),contentType:!1,processData:!1,beforeSend:function(c){var d=b.data("method")?b.data("method"):b.attr("method");"POST"!==d&&c.setRequestHeader("X-HTTP-Method-Override",d),(a("body").hasClass("logged-in")||a("body").hasClass("wp-admin"))&&c.setRequestHeader("X-WP-Nonce",hivepressCoreData.apiNonce)},complete:function(h){var i=h.responseJSON,j=b.data("redirect");e.prop("disabled",!1),e.attr("data-state",""),"undefined"!=typeof grecaptcha&&c.length&&grecaptcha.reset(d),null==i||i.hasOwnProperty("data")?(b.data("message")&&307!==h.status&&f.addClass(g+"--success").html("<div>"+b.data("message")+"</div>").show(),j||307===h.status?"string"==typeof j?window.location.replace(j):window.location.reload(!0):(b.data("reset")||!b.is("[data-id]"))&&(b.trigger("reset"),b.find(hivepress.getSelector("file-upload")).each(function(){var b=a(this),c=b.closest("label"),d=c.parent().children("div").first();d.html("")}))):i.hasOwnProperty("error")&&(i.error.hasOwnProperty("errors")?a.each(i.error.errors,function(a,b){f.append("<div>"+b.message+"</div>")}):i.error.hasOwnProperty("message")&&f.html("<div>"+i.error.message+"</div>"),!f.is(":empty")&&f.addClass(g+"--error").show()),f.is(":visible")&&b.offset().top<a(window).scrollTop()&&a("html, body").animate({scrollTop:b.offset().top},500)}}),h.preventDefault()})}})})})(jQuery);